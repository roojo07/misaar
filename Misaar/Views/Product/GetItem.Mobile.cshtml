
@using Misaar.Models

@model Category

@{
    Layout = "~/Views/Shared/_Layout.Mobile.cshtml";
    ViewBag.Title = Model.Name;
}

<div style="min-height:300px">
    @if (Model.Files.Any(f => f.FileType == FileType.Avatar))
    {
        <div style="margin-right:15px; margin-bottom:10px; float:left">
            <img src="~/File?id=@Model.Files.First(f => f.FileType == FileType.Avatar).Id" alt="avatar" width="160" height="120" />
        </div>
    }

    <h5>
        <strong>@Model.Name</strong>       
    </h5>

    <input type="hidden" id="itemBody" value="@Model.Description" />
    <div class="description"></div>
   
</div>
<div>
    <div style="text-align:center">
        <div id="phoneButton">
            <img src="~/Images/telephone_black_small.png" alt="phone" width="20" height="20" style="margin-left:-10px; margin-bottom:-3px" />
            <span>Заказать звонок</span>
        </div>
        <a href=@Url.Action("Feedback", "Home")>
            <div id="messageButton">
                <img src="~/Images/email_envelope.png" alt="message" width="20" height="20" style="margin-left:-10px; margin-bottom:-3px" />
                <span>Написать нам</span>
            </div>
        </a>
    </div>
    <br />
    @if (Model.Products.Count > 0 && (Model.Name == "Пиломатериалы" || Model.Id == 3))
    {
        <table class="productTable" cellpadding="10" align="center">
            <caption><h4>Пиломатериал обрезной естественной влажности</h4></caption>
            <thead class="tableHead">
                <tr>
                    <td>Размеры (мм)</td>
                    <td>Порода</td>
                    <td>Длина (м)</td>
                    <td>Сорт</td>
                    <td>Наличие</td>
                    <td>
                        Цена за куб.м, руб
                    </td>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Products)
                {
                    if (item.Subcategory == "Обрезная" && !item.IsHide)
                    {
                        <tr>
                            <td>@item.Size</td>
                            <td>@item.Material</td>
                            <td>@item.Length</td>
                            <td>@item.Sort</td>
                            <td>
                                @if (item.Presence == "Под заказ" && item.DaysToWork != null)
                                {
                                    <span>@item.Presence, @item.DaysToWork дней</span>
                                }
                                else
                                {
                                    @item.Presence
                                }

                            </td>
                            <td>
                                @if (item.Price == null)
                                {
                                    <span>Договорная</span>
                                }
                                @item.Price
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>


        <table class="productTable" cellpadding="10" align="center">
            <caption><h4>Пиломатериал необрезной естественной влажности</h4></caption>
            <thead class="tableHead">
                <tr>
                    <td>Размеры (мм)</td>
                    <td>Порода</td>
                    <td>Длина (м)</td>
                    <td>Сорт</td>
                    <td>Наличие</td>
                    <td>
                        Цена за куб.м, руб
                    </td>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Products)
                {
                    if (item.Subcategory == "Необрезная" && !item.IsHide)
                    {
                        <tr>
                            <td>@item.Size</td>
                            <td>@item.Material</td>
                            <td>@item.Length</td>
                            <td>@item.Sort</td>
                            <td>
                                @if (item.Presence == "Под заказ" && item.DaysToWork != null)
                                {
                                    <span>@item.Presence, @item.DaysToWork дней</span>
                                }
                                else
                                {
                                    @item.Presence
                                }

                            </td>
                            <td>
                                @if (item.Price == null)
                                {
                                    <span>Договорная</span>
                                }
                                @item.Price
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>

    }
    else if (Model.Products.Count > 0)
    {
        <table class="productTable" cellpadding="10" align="center">
            <caption><h4>@Model.Name</h4></caption>
            <thead class="tableHead">
                <tr>
                    <td>Размеры (мм)</td>
                    <td>Порода</td>
                    <td>Длина (м)</td>
                    <td>Сорт</td>
                    <td>Наличие</td>
                    <td>
                        Цена за кв.м, руб
                    </td>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Products)
                {
                    if (!item.IsHide)
                    {
                        <tr>
                            <td>@item.Size</td>
                            <td>@item.Material</td>
                            <td>@item.Length</td>
                            <td>@item.Sort</td>
                            <td>
                                @if (item.Presence == "Под заказ" && item.DaysToWork != null)
                                {
                                    <span>@item.Presence, @item.DaysToWork дней</span>
                                }
                                else
                                {
                                    @item.Presence
                                }

                            </td>
                            <td>
                                @if (item.Price == null)
                                {
                                    <span>Договорная</span>
                                }
                                @item.Price
                            </td>

                        </tr>
                    }

                }
            </tbody>

        </table>
        if (Model.Name != "Брусок, брус" || Model.Id != 8)
        {
            <h3><span class="labelDanger">Цена на сорт 3, 4 - договорная</span></h3>
        }

    }

</div>
<br />


<script>
    var button = document.getElementById("phoneButton");
    button.onclick = showDiv;

    function showDiv() {
        var targetDiv = document.getElementById("phoneNumber");
        targetDiv.style.opacity = 0.9;
        targetDiv.style.zIndex = 3;
    }

    var myJavaScriptValue = document.getElementById("itemBody").value;
    var articleDiv = document.querySelector("div.description");
    articleDiv.innerHTML = myJavaScriptValue;
</script>

